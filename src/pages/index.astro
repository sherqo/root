---
import { getCollection } from 'astro:content';
import PageLayout from '@/layouts/PageLayout.astro';
import PageHeader from '@/components/layout/PageHeader.astro';
import Card from '@/components/features/journal/card.astro';
import type { Journal } from '@/types/journal';

const journals = await getCollection('journal');
const sortedJournals = journals.sort((a: Journal, b: Journal) => b.data.date.getTime() - a.data.date.getTime());
---

{/* HOME PAGE '/' */}
<PageLayout title="Home" description="Sharqawy — CS student, builder, and maker. Read my journal.">
  <div class="space-y-16">
    <PageHeader subtitle="CS student & builder">yo, i'm sharaawy</PageHeader>

    <div class="space-y-6">
      <p>
        i build to get out of my own way and share what i learn. i like sharp tools, clean design, and projects that actually do something.
        i get lost in random rabbit holes, break things to understand how they work, and share experiments, thoughts, and the grind of
        figuring things out — from coding and kernel tinkering to hardware experiments. honesty, authenticity, and deep focus are my
        baseline. check out my CV
      </p>
    </div>

    <div>
      <div class="bg-border my-12 h-px"></div>
      {
        sortedJournals.length === 0 ? (
          <p>No posts yet.</p>
        ) : (
          <div class="flex flex-col gap-6">
            {sortedJournals.map((journal: Journal) => (
              <Card journal={journal} />
            ))}
          </div>
        )
      }
    </div>
  </div>
</PageLayout>
